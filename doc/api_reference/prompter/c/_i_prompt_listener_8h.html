<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CERENCE SDK - PROMPTER C API: IPromptListener.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="nuan_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CERENCE SDK - PROMPTER C API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_19631cc9c9836c7606cfea8f44f21b85.html">api</a></li><li class="navelem"><a class="el" href="dir_11249db55eeccaa8cfd4339a0b5193ce.html">c</a></li><li class="navelem"><a class="el" href="dir_18714ea324690cc2cc05823f033e5709.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">IPromptListener.h File Reference<div class="ingroups"><a class="el" href="group__nuance__prompter.html">nuance_prompter</a> &raquo; <a class="el" href="group___i_prompt_listener.html">IPromptListener</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Listener to receive error, event and text marker notifications while a prompt is running.  
<a href="#details">More...</a></p>

<p><a href="_i_prompt_listener_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__vtable__nuance__prompter___i_prompt_listener.html">vtable_nuance_prompter_IPromptListener</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listener to receive error, event and text marker notifications while a prompt is running.  <a href="struct__vtable__nuance__prompter___i_prompt_listener.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gacfdcbe4565fa2a8b5d4655d180f2790a"><td class="memItemLeft" align="right" valign="top">typedef struct _nuance_prompter_IPromptListener&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#gacfdcbe4565fa2a8b5d4655d180f2790a">nuance_prompter_IPromptListener</a></td></tr>
<tr class="memdesc:gacfdcbe4565fa2a8b5d4655d180f2790a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listener to receive error, event and text marker notifications while a prompt is running.  <a href="group___i_prompt_listener.html#gacfdcbe4565fa2a8b5d4655d180f2790a">More...</a><br /></td></tr>
<tr class="separator:gacfdcbe4565fa2a8b5d4655d180f2790a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0484cf8ec44dd8cfe182d8b9ff23ceec"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#ga0484cf8ec44dd8cfe182d8b9ff23ceec">FUNC_nuance_prompter_IPromptListener_onEvent</a>) (void *instance, <a class="el" href="group___prompt_event.html#ga6b1b9cbf70024da7f7612e7141eb39f4">nuance_prompter_PromptEvent</a> event)</td></tr>
<tr class="memdesc:ga0484cf8ec44dd8cfe182d8b9ff23ceec"><td class="mdescLeft">&#160;</td><td class="mdescRight">The notification is sent to inform an application about the prompt progress.  <a href="group___i_prompt_listener.html#ga0484cf8ec44dd8cfe182d8b9ff23ceec">More...</a><br /></td></tr>
<tr class="separator:ga0484cf8ec44dd8cfe182d8b9ff23ceec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga423a174f072ea033e1e5b39597a6a806"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#ga423a174f072ea033e1e5b39597a6a806">FUNC_nuance_prompter_IPromptListener_onTextUnitMarker</a>) (void *instance, LH_S32 count, LH_S32 totalCount, LH_S32 timestamp)</td></tr>
<tr class="memdesc:ga423a174f072ea033e1e5b39597a6a806"><td class="mdescLeft">&#160;</td><td class="mdescRight">The notification is sent each time a text unit marker event occurs.  <a href="group___i_prompt_listener.html#ga423a174f072ea033e1e5b39597a6a806">More...</a><br /></td></tr>
<tr class="separator:ga423a174f072ea033e1e5b39597a6a806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a7ea8eede10a648318caf701b5c5395"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#ga4a7ea8eede10a648318caf701b5c5395">FUNC_nuance_prompter_IPromptListener_onWordMarker</a>) (void *instance, LH_S32 timestamp)</td></tr>
<tr class="memdesc:ga4a7ea8eede10a648318caf701b5c5395"><td class="mdescLeft">&#160;</td><td class="mdescRight">The notification is sent each time a word marker event occurs.  <a href="group___i_prompt_listener.html#ga4a7ea8eede10a648318caf701b5c5395">More...</a><br /></td></tr>
<tr class="separator:ga4a7ea8eede10a648318caf701b5c5395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c011e126870ccb944b6ce717a7e8484"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#ga4c011e126870ccb944b6ce717a7e8484">FUNC_nuance_prompter_IPromptListener_onBookmark</a>) (void *instance, LH_S32 id, LH_S32 timestamp)</td></tr>
<tr class="memdesc:ga4c011e126870ccb944b6ce717a7e8484"><td class="mdescLeft">&#160;</td><td class="mdescRight">The notification is sent each time a bookmark event occurs.  <a href="group___i_prompt_listener.html#ga4c011e126870ccb944b6ce717a7e8484">More...</a><br /></td></tr>
<tr class="separator:ga4c011e126870ccb944b6ce717a7e8484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19b4fb962cf79eafb1e0671a3d51d917"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#ga19b4fb962cf79eafb1e0671a3d51d917">FUNC_nuance_prompter_IPromptListener_onLipInfoMarker</a>) (void *instance, LH_S32 const *lipInfo, LH_S32 nlipInfo, LH_S32 timestamp)</td></tr>
<tr class="memdesc:ga19b4fb962cf79eafb1e0671a3d51d917"><td class="mdescLeft">&#160;</td><td class="mdescRight">The notification is sent each time a lipinfo marker event occurs.  <a href="group___i_prompt_listener.html#ga19b4fb962cf79eafb1e0671a3d51d917">More...</a><br /></td></tr>
<tr class="separator:ga19b4fb962cf79eafb1e0671a3d51d917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12946ba893045cef15b3d0633aaedf99"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#ga12946ba893045cef15b3d0633aaedf99">FUNC_nuance_prompter_IPromptListener_onError</a>) (void *instance, <a class="el" href="group___prompt_error.html#gad56d324a00cc438cc8d23c2503e8b70d">nuance_prompter_PromptError</a> error, const LH_CHAR *message)</td></tr>
<tr class="memdesc:ga12946ba893045cef15b3d0633aaedf99"><td class="mdescLeft">&#160;</td><td class="mdescRight">The notification is sent when an error occurs while a prompt is running.  <a href="group___i_prompt_listener.html#ga12946ba893045cef15b3d0633aaedf99">More...</a><br /></td></tr>
<tr class="separator:ga12946ba893045cef15b3d0633aaedf99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4dea7479dd21cf324f996a7e228feee9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___i_prompt_listener.html#gacfdcbe4565fa2a8b5d4655d180f2790a">nuance_prompter_IPromptListener</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#ga4dea7479dd21cf324f996a7e228feee9">nuance_prompter_IPromptListener_create</a> (const vtable_nuance_prompter_IPromptListener *cb_interface, void *userData)</td></tr>
<tr class="separator:ga4dea7479dd21cf324f996a7e228feee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac57753ba0c992507d41b0252dfc24a0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_prompt_listener.html#gac57753ba0c992507d41b0252dfc24a0e">nuance_prompter_IPromptListener_destroy</a> (<a class="el" href="group___i_prompt_listener.html#gacfdcbe4565fa2a8b5d4655d180f2790a">nuance_prompter_IPromptListener</a> *)</td></tr>
<tr class="separator:gac57753ba0c992507d41b0252dfc24a0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Listener to receive error, event and text marker notifications while a prompt is running. </p>
<p>A prompt is initiated by invoking one of these calls: <code>nuance_prompter_IPrompter_playString</code>, <code>nuance_prompter_IPrompter_playStringByFormat</code>, <code>nuance_prompter_IPrompter_playFile</code> or <code>nuance_prompter_IPrompter_playFileByFormat</code>.</p>
<p>While the prompt runs, the application gets information about the prompt progress as <code>nuance_prompter_IPromptListener_onEvent</code> notifications. The prompt progress is described with <code>nuance_prompter_PromptEvent</code> enumeration values. The prompt events typically occur in the following sequence:</p>
<ul>
<li>
1. <code>START_GENERATION_EVENT</code>: The Prompter starts to convert text into speech. </li>
<li>
2. <code>START_PLAY_EVENT</code>: The first audio chunk of the generated speech has been played at the output device. </li>
<li>
3. <code>END_GENERATION_EVENT</code>: The Prompter ended speech generation (Ends also if the prompt is aborted/interrupted). </li>
<li>
4. <code>END_PLAY_EVENT</code>: The last audio chunk of the generated speech has been played at the output device (Can be also the last chunk of an aborted/interrupted prompt). </li>
<li>
5. <code>FINISH_PROMPT_EVENT</code>: The prompt is fully processed and can be destroyed. </li>
</ul>
<p>Do not rely on the order of <code>START_PLAY_EVENT</code> and <code>END_GENERATION_EVENT</code>. In some cases the speech generation ends before <code>START_PLAY_EVENT</code> occurs (happens usually when the overall play time of the generated speech is very short).</p>
<p>NOTE: The output device has played already the first audio chunk at the point, when <code>START_PLAY_EVENT</code> occurs. Thus, the overall play time of a prompt matches the time period between <code>START_PLAY_EVENT</code> and <code>END_PLAY_EVENT</code> plus the play time of one audio chunk. And the time elapsing from the moment <code>nuance_prompter_IPrompter_play*</code> was called, until playback starts at the output device, matches the time period between the call and <code>START_PLAY_EVENT</code> minus the play time of one audio chunk.</p>
<p>A prompt can be aborted with a call to <code>nuance_prompter_IPrompt_abortOperation</code>. In this case, an <code>ABORTED_PROMPT_EVENT</code> notification is sent to the application right before the final event <code>FINISH_PROMPT_EVENT</code> to confirm that the prompt has been aborted. If <code>nuance_prompter_IPrompt_abortOperation</code> is called after the <code>FINISH_PROMPT_EVENT</code> notification, no <code>ABORTED_PROMPT_EVENT</code> notification can be expected.</p>
<p>Applications using <code>local</code> <code>IPrompter</code> instances can optionally receive marker event notifications. The notifications <code>nuance_prompter_IPromptListener_onTextUnitMarker</code>, <code>nuance_prompter_IPromptListener_onWordMarker</code>, <code>nuance_prompter_IPromptListener_onBookmark</code>, <code>nuance_prompter_IPromptListener_onLipInfoMarker</code> can be indiviually enabled in the <code>local</code> usecase configuration. For example to enable all kinds of marker event notifications, the relevant usecase definition must contain: <code>"enabled_markers": "textunit,word,bookmark,lipinfo"</code>.</p>
<p>To avoid overfloading of the application with notifications, it is recommended to reduce the enabled marker notifications to the ones really needed.</p>
<p>NOTE: Loaded user rulesets cause the Prompter to rewrite the input text according to the given rules. This may change the amount of text units and phonemes. All marker notifications relate to the rewritten text and not the original input text.</p>
<p>With <code>nuance_prompter_IPromptListener_onError</code> notifications, the application gets informed about errors that occur during prompting. Besides an error enumeration value an error notification contains also a string parameter describing the error more detailed. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Cerence SDK, &copy;2020, Cerence, Inc.
</small></address>
</body>
</html>
