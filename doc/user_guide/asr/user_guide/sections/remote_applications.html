
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Remote applications</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Non-functional aspects to consider when using Cerence ASR" href="non_functional_aspects.html" />
    <link rel="prev" title="NLU applications" href="nlu_applications.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="remote-applications">
<span id="id1"></span><h1>Remote applications</h1>
<p>In contrast to local, on-device Cerence ASR applications, remote
applications invoke a remote server to do the actual
recognition. The speech recognition session is initiated locally on
the device, but at some point a connection to a server is made, audio
is streamed to this server, and after the server runs its recognition,
the result is sent back to the device for processing.</p>
<p>In order to make remote recognition work, a number of things must be
configured:</p>
<ul class="simple">
<li>the location of the remote server</li>
<li>how to identify to the remote server</li>
<li>how to talk to the remote server (protocol, audio format)</li>
<li>possibly, a way to upload data (e.g. a contact or song list)</li>
<li>…</li>
</ul>
<p>Most of these items are configured through JSON files, similar to how
the rest of the Cerence ASR configuration is done. Normally, the only
code you need to write that is specific to the cloud is the code in
the <code class="docutils literal notranslate"><span class="pre">&lt;IRecognizerListener&gt;.onResult()</span></code> callback function, to
parse the result and retrieve the parts relevant for the system.</p>
<div class="section" id="basic-cloud-application">
<span id="basic-cloud-app"></span><h2>Basic cloud application</h2>
<p>The configuration for a minimal cloud recognition application are as follows:</p>
<div class="highlight-json notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;VoConHigh 5.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;application&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;REMOTE_TEST&quot;</span><span class="p">,</span>
    <span class="nt">&quot;input&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;cloud&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cloud&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloud_services_name&quot;</span><span class="p">:</span> <span class="s2">&quot;csHttp&quot;</span><span class="p">,</span>
        <span class="nt">&quot;query&quot;</span> <span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;remote_test_query&quot;</span><span class="p">,</span>
          <span class="nt">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;NVC_ASR_CMD&quot;</span><span class="p">,</span>
          <span class="nt">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;json&quot;</span> <span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;dictation_type&quot;</span> <span class="p">:</span> <span class="s2">&quot;automotive-dictation&quot;</span><span class="p">,</span>
              <span class="nt">&quot;dictation_language&quot;</span> <span class="p">:</span> <span class="s2">&quot;eng-USA&quot;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;REQUEST_INFO&quot;</span><span class="p">,</span>
            <span class="nt">&quot;REQUEST_INFO&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;json&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nt">&quot;end&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="nt">&quot;enable_intermediate_response&quot;</span><span class="p">:</span> <span class="mi">0</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>First of all, on line 6, the <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">cloud</span></code>. This indicates
that a remote recognition needs to be done, and will also trigger the
set up of the internal audio path for cloud recognition (see
<a class="reference internal" href="audio_setup_and_configuration.html#cloud-internal-audio"><span class="std std-ref">Audio processing path for Cloud ASR</span></a>). Then, line 7 and onwards, the
application definition itself is wrapped in a <code class="docutils literal notranslate"><span class="pre">cloud</span></code> tag.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cloud_services_name</span></code> refers to the Cloud Services object (see
<a class="reference internal" href="#cloud-services-configuration"><span class="std std-ref">Cloud services</span></a>) that contains the connection
details: server URL, credentials, etc. A system can have several Cloud
Services objects. Each of these has a name, which is used to refer to
them.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">query</span></code> part describes what to send to the server, when a
recognition should be done. The command itself, in this case, is
<code class="docutils literal notranslate"><span class="pre">NVC_ASR_CMD</span></code>. The exact command names can differ, depending on how
your Cerence Cloud servers are set up; the commands should be
specified in a document provided to you when your servers were
provisioned.</p>
<p>Two JSON section accompany the command: <code class="docutils literal notranslate"><span class="pre">connection_info</span></code> and
<code class="docutils literal notranslate"><span class="pre">params</span></code>. The connection info contains metadata about the request,
and about the device making the request; you can find more details in
the <a class="reference internal" href="#connection-info"><span class="std std-ref">Connection info</span></a> subsection.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">param</span></code> section contains a <code class="docutils literal notranslate"><span class="pre">REQUEST_INFO</span></code> block. The request
info is info that is specific for the command being sent. For a
recognition command, request info might include:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code>. These give the speech transcription
that is currently shown to the user (based on earlier
recognitions). This provides context for longer dictations, e.g. if
editing previously spoken text.</li>
<li><code class="docutils literal notranslate"><span class="pre">grammar_list</span></code>. This is a JSON object that tells the server which
(grammars constructed from) uploaded data it should use while
recognizing the streamed audio.</li>
<li><code class="docutils literal notranslate"><span class="pre">checksum_list</span></code>. This JSON array contains the checksums of the
grammars to be used in recognition. This is used to check if the
data on the server is in sync with data uploaded by the client.</li>
<li><code class="docutils literal notranslate"><span class="pre">enable_auto_puctuation</span></code>. Indicates whether the result returned
should include automatically-added punctuation, or not.</li>
</ul>
<span id="index-0"></span><ul id="cloud-intermediate-results">
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">intermediate_response_mode</span></code>. Indicates whether the server should
send intermediate responses. Possible values:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">UtteranceDetectionWithCompleteRecognition</span></code>. In this mode, a
result is returned as soon a pause (silence) is detected. There
is no separate “final” result in this mode.</li>
<li><code class="docutils literal notranslate"><span class="pre">NoUtteranceDetectionWithPartialRecognition</span></code>. In this mode, a
result is returned after each detected word. Each intermediate
response is cumulative and corrective, that is, it includes the
previously recognized words plus new words or a corrected version
of the previously recognized words. The final result is then the
full phrase.</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Note that both the <code class="docutils literal notranslate"><span class="pre">connection_info</span></code> and <code class="docutils literal notranslate"><span class="pre">REQUEST_INFO</span></code> secions
contain a <code class="docutils literal notranslate"><span class="pre">json</span></code> key. These are <a class="reference internal" href="non_functional_aspects.html#literal-json-blocks"><span class="std std-ref">literal JSON blocks</span></a>. In order to avoid repetition of these literal
blocks, they can be named as well; see <a class="reference internal" href="non_functional_aspects.html#named-json-blocks"><span class="std std-ref">named JSON blocks</span></a>.</p>
</div>
<div class="section" id="cloud-responses">
<h2>Cloud responses</h2>
<p>After a command is sent to the server, the server will send a JSON
response back to inform the client about the result of the
command. Obviously, for a recognition command, the result will contain
the recognition results. However, also for the other command types the
server response will have a JSON dictionary with result details in it,
that can be parsed and interpreted by the application to help decide
how to react.</p>
<ul>
<li><p class="first">Error responses</p>
<p>Error responses will contain an error code, and a description of the
error:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Description&quot;</span><span class="p">:</span><span class="s2">&quot;We were unable to process your request. The action parameters are invalid.&quot;</span><span class="p">,</span>
  <span class="nt">&quot;Error&quot;</span><span class="p">:</span><span class="mi">216</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Data upload command response</p>
<p>An example of a data upload response is given below. Apart from the
originating command (key <code class="docutils literal notranslate"><span class="pre">result_type</span></code>) and the session ID, the
answer also contains a number of keys that reflect the status of the
upload on the server:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">structured_content_category</span></code>:: the name and
type of the grammar that was updated.</li>
<li><code class="docutils literal notranslate"><span class="pre">final_count</span></code>: the number of entries in the grammar after the upload.</li>
<li><code class="docutils literal notranslate"><span class="pre">status</span></code>: whether the update succeeded.</li>
<li><code class="docutils literal notranslate"><span class="pre">checksum</span></code>: the new checksum of the grammar, after potentially
clearing it, and updating it with the new entries.</li>
</ul>
<div class="highlight-json notranslate" id="cloud-basic-result"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;result_type&quot;</span><span class="p">:</span> <span class="s2">&quot;NVC_DATA_UPLOAD_CMD&quot;</span><span class="p">,</span>
  <span class="nt">&quot;NMAS_PRFX_TRANSACTION_ID&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;NMAS_PRFX_SESSION_ID&quot;</span><span class="p">:</span> <span class="s2">&quot;f5f91c1c-5b19-47e0-bb43-9bf39fb72b9a&quot;</span><span class="p">,</span>
  <span class="nt">&quot;result_list&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;value_too_large&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;force_upload&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;max_list_size_reached&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;checksum&quot;</span><span class="p">:</span> <span class="s2">&quot;1578331642&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;REMOTE_CONTACTS_TEST&quot;</span><span class="p">,</span>
    <span class="nt">&quot;final_count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structured_content&quot;</span><span class="p">,</span>
    <span class="nt">&quot;structured_content_category&quot;</span><span class="p">:</span> <span class="s2">&quot;contacts&quot;</span><span class="p">,</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
  <span class="p">}],</span>
  <span class="nt">&quot;voc_pregeneration_status&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Recognition command response</p>
<p>The cloud result format for a recognition is detailed in the <a class="reference internal" href="results.html#cloud-result-structure"><span class="std std-ref">Cloud results</span></a> section.</p>
</li>
</ul>
</div>
<div class="section" id="connection-info">
<span id="index-1"></span><span id="id2"></span><h2>Connection info</h2>
<p>The “connection info” data is passed to the cloud server for most
commands. It represents metadata about the source of the request,
which is independent of the nature of the request. An example of a
connection info JSON block looks like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;connection_info&quot;</span> <span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;MyConnection&quot;</span><span class="p">,</span>
      <span class="nt">&quot;json&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;dictation_type&quot;</span> <span class="p">:</span> <span class="s2">&quot;Dictation&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dictation_language&quot;</span> <span class="p">:</span> <span class="s2">&quot;eng-USA&quot;</span><span class="p">,</span>
        <span class="nt">&quot;locale&quot;</span> <span class="p">:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span>
        <span class="nt">&quot;application_name&quot;</span> <span class="p">:</span> <span class="s2">&quot;Testing http application&quot;</span><span class="p">,</span>
        <span class="nt">&quot;organization_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;NUANCE&quot;</span><span class="p">,</span>
        <span class="nt">&quot;phone_OS&quot;</span> <span class="p">:</span> <span class="s2">&quot;4.0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;phone_network&quot;</span> <span class="p">:</span> <span class="s2">&quot;wifi&quot;</span><span class="p">,</span>
        <span class="nt">&quot;audio_source&quot;</span> <span class="p">:</span> <span class="s2">&quot;SpeakerAndMicrophone&quot;</span><span class="p">,</span>
        <span class="nt">&quot;location&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;+45.5086699, -73.5539925&gt; +/- 99.00m&quot;</span><span class="p">,</span>
        <span class="nt">&quot;application_session_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;afb7bf7gw2g7seg5nw0up2z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;utterance_number&quot;</span> <span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ui_langugage&quot;</span> <span class="p">:</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
        <span class="nt">&quot;phone_submodel&quot;</span> <span class="p">:</span> <span class="s2">&quot;nmPhone2,1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;application_state_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;45&quot;</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The connection info structure shown here has a <code class="docutils literal notranslate"><span class="pre">name</span></code> key in
addition to the <code class="docutils literal notranslate"><span class="pre">json</span></code>; this can be used to refer to this JSON block
from other locations; see <a class="reference internal" href="non_functional_aspects.html#named-json-blocks"><span class="std std-ref">Named JSON sections</span></a> for more info. The
<code class="docutils literal notranslate"><span class="pre">json</span></code> key indicates that the JSON dictionary in the value will be
included literally in the request to the server.</p>
<p>Apart from <code class="docutils literal notranslate"><span class="pre">dictation_type</span></code> and <code class="docutils literal notranslate"><span class="pre">dictation_language</span></code>, all fields
in the connection info block are optional. However, they can be used
by the server to optimize the response for the target device.</p>
</div>
<div class="section" id="cloud-services">
<span id="cloud-services-configuration"></span><span id="index-2"></span><h2>Cloud services</h2>
<p>The cloud services configuration holds the configuration needed to
connect to a Cerence cloud server. Here is an example for an HTTP connection:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;CloudServices 1.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cloud_services&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;csHttp&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_name&quot;</span><span class="p">:</span> <span class="s2">&quot;vcsa_api_sample&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;app_id&gt;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_key&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;app_key&gt;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;url&gt;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_name&quot;</span> <span class="p">:</span> <span class="s2">&quot;AUTO_EVAL&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ssl_certificate_bundle&quot;</span><span class="p">:</span> <span class="s2">&quot;bundle.crt&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;app_language&quot;</span><span class="p">:</span> <span class="s2">&quot;eng-USA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;carrier&quot;</span><span class="p">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
    <span class="nt">&quot;device_model&quot;</span><span class="p">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
    <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;remote_test&quot;</span><span class="p">,</span>
    <span class="nt">&quot;input_audio_format&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;ENCODING_OPUS&quot;</span><span class="p">,</span>
      <span class="nt">&quot;container&quot;</span><span class="p">:</span> <span class="s2">&quot;CONTAINER_OGG&quot;</span><span class="p">,</span>
      <span class="nt">&quot;sample_rate&quot;</span><span class="p">:</span> <span class="mi">16000</span><span class="p">,</span>
      <span class="nt">&quot;samples_per_channel&quot;</span><span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
      <span class="nt">&quot;channel_count&quot;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">},</span>
    <span class="nt">&quot;output_audio_format&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;ENCODING_OPUS&quot;</span><span class="p">,</span>
      <span class="nt">&quot;sample_rate&quot;</span><span class="p">:</span> <span class="mi">16000</span><span class="p">,</span>
      <span class="nt">&quot;samples_per_channel&quot;</span><span class="p">:</span> <span class="mi">1920</span><span class="p">,</span>
      <span class="nt">&quot;channel_count&quot;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For a detailed description, see <a class="reference internal" href="../chapters/references.html#cloud-services-json-reference"><span class="std std-ref">Cloud services</span></a>.</p>
<p>The cloud services definition also includes a specification for audio
input and audio output formats. This relates to recognition commands,
where audio is streamed from the client to the server, and
text-to-speech commands, where audio is streamed from the server to
the client.</p>
<p id="index-3">The <code class="docutils literal notranslate"><span class="pre">input_audio_format</span></code> describes the format of the audio that will
be streamed, through the cloud services, to the server. Generally,
this should be Opus-encoded audio, wrapped in an Ogg container. Audio
for streaming is prepared in an internal audio chain; see section
<a class="reference internal" href="audio_setup_and_configuration.html#cloud-internal-audio"><span class="std std-ref">Audio processing path for Cloud ASR</span></a> for more information.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">output_audio_format</span></code> is used for streaming server-generated TTS
output back to the client. Refer to the TTS documentation for more
information on this.</p>
<p id="index-4">It should be noted that all commands that are sent through the same
Cloud Services component (<code class="docutils literal notranslate"><span class="pre">csHttp</span></code> in the example) are serialized,
i.e. they are performed one after the other, in the order in which they
are submitted.</p>
<p>This property is useful if for example you want to upload data the
server, and want to be sure that the upload is completed before
attempting a recognition.</p>
<p>On the other hand, you may want to perform several requests to the
same server in parallel. In that case, you can create several Cloud
Services components, with a different name, but using the same server
address and credentials.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>It is possible to configure some of these configuration items at run
time. This means that they don’t have to be specified in the JSON
files. This is useful, for example, for keeping cloud credentials in a
separate file, or to fill in the <code class="docutils literal notranslate"><span class="pre">carrier</span></code> name with the actual
value, retrieved from the device’s networking stack at the time when
the request is made.</p>
<p>The mechanism for dynamic configuration is explained in the
subsection <a class="reference internal" href="non_functional_aspects.html#dynamic-configuration"><span class="std std-ref">Dynamic configuration at runtime</span></a>; in the JSON file you specify
a lookup key, and in the code you specify a callback function that
will be called with this key as the argument. The return value of the
callback will then be used as the value for the original key in the
JSON configuration file.</p>
<p>For more detailed explanation, refer to <a class="reference external" href="../../cloudservices/SDK_CloudServices_UserGuide.html">CloudServices SDK</a></p>
</div>
<div class="section" id="data-upload">
<span id="index-5"></span><span id="id3"></span><h2>Data upload</h2>
<p>In local recognitions, you can augment the ASR search space at runtime
using dynamic content consumers (see section
<a class="reference internal" href="dcc.html#dynamic-content-consumers"><span class="std std-ref">Dynamic Content Consumers</span></a>).</p>
<p>The Cerence Cloud allow a similar mechanism to augment the standard
grammars for its remote recognizers. Local data, such as a contact
list downloaded from the user’s phone, can be uploaded to the cloud
server. It will be tagged with a type, a user ID, etc., to make sure
it will only be used in the correct circumstances (a recognition from
the same user ID).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>When you define a local recognition context, you specify the search
space in an ASR application (see <a class="reference internal" href="search.html#contexts"><span class="std std-ref">contexts</span></a>). If this
search spaces includes slots, they are filled using dynamic content
consumers.</p>
<p>The mechanism for remote recognition and slot filling is similar:</p>
<ul class="simple">
<li>for recognition, the cloud query to run is specified in the ASR
application definition (see <a class="reference internal" href="#basic-cloud-app"><span class="std std-ref">Basic cloud application</span></a>).</li>
<li>for filling slots, the data is uploaded using dynamic content
consumers, which are configured to run a cloud query, instead of
creating a local guest context.</li>
</ul>
<p>The input for the DCC in the remote case is the same as in the local
case: either a COP file (specification: <a class="reference internal" href="../chapters/references.html#cop-file"><span class="std std-ref">COP files</span></a>; usage:
<a class="reference internal" href="dcc.html#data-preparation"><span class="std std-ref">Data preparation</span></a>), or a content values interator (see <a class="reference internal" href="dcc.html#content-value-iterators"><span class="std std-ref">Content value iterators</span></a>).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>An example of a JSON definition for a DCC that uploads data is this
one:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;dynamic_content_consumer&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;CONTACTS_TEST&quot;</span><span class="p">,</span>
    <span class="nt">&quot;content&quot;</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;Entry_ID&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;integer&quot;</span>
      <span class="p">},{</span>
        <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;FirstName_Ortho&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;string&quot;</span>
      <span class="p">},{</span>
        <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;LastName_Ortho&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">}],</span>
    <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;remote&quot;</span><span class="p">,</span>
    <span class="nt">&quot;remote&quot;</span> <span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;cloud_services_name&quot;</span><span class="p">:</span> <span class="s2">&quot;csHttp&quot;</span><span class="p">,</span>
      <span class="nt">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;NVC_DATA_UPLOAD_CMD&quot;</span><span class="p">,</span>
      <span class="nt">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;json&quot;</span> <span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;dictation_type&quot;</span> <span class="p">:</span> <span class="s2">&quot;automotive-dictation&quot;</span><span class="p">,</span>
          <span class="nt">&quot;dictation_language&quot;</span> <span class="p">:</span> <span class="s2">&quot;eng-USA&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;grammar_type&quot;</span><span class="p">:</span> <span class="s2">&quot;structured_content&quot;</span><span class="p">,</span>
      <span class="nt">&quot;structured_content&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;category&quot;</span> <span class="p">:</span> <span class="s2">&quot;contacts&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Entry_ID&quot;</span><span class="p">,</span>
        <span class="nt">&quot;content&quot;</span> <span class="p">:</span> <span class="p">[{</span>
          <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;fn&quot;</span><span class="p">,</span>
          <span class="nt">&quot;link&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;FirstName_Ortho&quot;</span>
          <span class="p">}</span>
        <span class="p">},{</span>
          <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;ln&quot;</span><span class="p">,</span>
          <span class="nt">&quot;link&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;LastName_Ortho&quot;</span>
        <span class="p">}</span>
      <span class="p">}]</span>
    <span class="p">},</span>
    <span class="nt">&quot;force_clear_all&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> that is given to the DCC is also the name that will be
used on the server, to tag the uploaded data, and to name the guest context
that will be generated from the uploaded data.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">content</span></code> section specifies to the DCC how its input data (COP file
or content value iterator) is specified. In this case, there are three
fields for each input record: an ID (<code class="docutils literal notranslate"><span class="pre">Entry_ID</span></code>), a first name
(<code class="docutils literal notranslate"><span class="pre">FirstName_Ortho</span></code>) and a last name (<code class="docutils literal notranslate"><span class="pre">LastName_Ortho</span></code>). (See
<a class="reference internal" href="dcc.html#dcc-data-sources"><span class="std std-ref">Data sources for DCCs</span></a> for explanation.)</p>
<p>Type <code class="docutils literal notranslate"><span class="pre">remote</span></code> specifies that the DCC should run a remote query when
it is instructed to prepare its data. As for a recognition command,
you specify the Cloud Services component to use with
<code class="docutils literal notranslate"><span class="pre">cloud_services_name</span></code>, and the command to send with <code class="docutils literal notranslate"><span class="pre">command</span></code>. The
cloud command for uploading data is usually <code class="docutils literal notranslate"><span class="pre">NVC_DATA_UPLOAD_CMD</span></code>,
although this may vary depending on how your cloud server was
provisioned. Then you also specify the <code class="docutils literal notranslate"><span class="pre">connection_info</span></code> for this
request (see <a class="reference internal" href="#connection-info"><span class="std std-ref">Connection info</span></a> above).</p>
<p>Uploaded data can be of a limited set of types. In this example, the
type is <code class="docutils literal notranslate"><span class="pre">structured_content</span></code>, and <code class="docutils literal notranslate"><span class="pre">category</span></code> is <code class="docutils literal notranslate"><span class="pre">contacts</span></code>. The
<code class="docutils literal notranslate"><span class="pre">content</span></code> JSON array describes how the contact data from the DCC
data source should be mapped to the fields of the
<code class="docutils literal notranslate"><span class="pre">structured_content</span></code> data type on the server. The <code class="docutils literal notranslate"><span class="pre">Entry_ID</span></code> field
is mapped to the <code class="docutils literal notranslate"><span class="pre">id</span></code> field on the server. Using the <code class="docutils literal notranslate"><span class="pre">link</span></code>
key, we see that <code class="docutils literal notranslate"><span class="pre">FirstName_Ortho</span></code> is linked to <code class="docutils literal notranslate"><span class="pre">fn</span></code> on the
server, and <code class="docutils literal notranslate"><span class="pre">LastName_Ortho</span></code> is linked to <code class="docutils literal notranslate"><span class="pre">ln</span></code> on the server.
Lastly, <code class="docutils literal notranslate"><span class="pre">force_clear_all</span></code> being <code class="docutils literal notranslate"><span class="pre">true</span></code> tells the server to erase
all previously uploaded data for this grammar.</p>
<p>For more information about structured content, see section
<a class="reference internal" href="../chapters/references.html#structured-content"><span class="std std-ref">Cloud uploads: structured content</span></a>.</p>
<span class="target" id="checksum"></span><div class="section" id="id4">
<h3>Checksum</h3>
<p>The Cerence cloud uses checksums to correlate client-side requests with
the server-side data. For any modification made to server-side data,
the server will return a checksum value to the client.</p>
<p>When the client wants to make subsequent modifications to the
server-side data, it must present this checksum to the server to make
sure that the modifications will be done on the right version of the
server-side data. For example, if a client wants to add more entries
to an existing server-side contact list,it must make sure to include
the checksum in the upload request. The server will then validate the
checksum before making modifications to the contact list.</p>
<p>The client provides the checksum to the server by including it in the
COP file,  by setting the value to EDBTableUpdateID in COP
file header:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#ECO V1.2 UTF-8;

#ECOScheme COP1 V1.6
#EDBDatabaseID NBT_FirstLastNames_v_1_0
#EDBTableUpdateMode GivenInColumn
#EDBTableUpdateType FullUpdate
#EDBTableUpdateID 1234

#Column1 Contact_ID
#Column2 FirstName_Ortho
#Column3 LastName_Ortho

#Format(Contact_ID) Ident
#AFType(Contact_ID) NumID
#NumIDFormat(Contact_ID) Decimal
#NumIDBinLength(Contact_ID) 32

1;&quot;Heather&quot;; &quot;Morris&quot;
2;&quot;John&quot;; &quot;Smith&quot;
3;&quot;Paola&quot;; &quot;Paola&quot;
</pre></div>
</div>
<p>If data is uploaded for the first time, or the previous data must be
deleted prior to uploading the new content, then the value of the
checksum is not important, and will ignored by the server.</p>
<p>After the first successful upload, the server will provides the new
checksum in its JSON response.</p>
<p>In case the content on the server needs to be updated by adding or
removing entries from the existing content, then the previously
received checksum must to be set to EDBTableUpdateID in COP file
header.</p>
</div>
</div>
<div class="section" id="queries-with-remote-data">
<h2>Queries with remote data</h2>
<p>Now that our data is uploaded, we can extend the definition of our
application to make use of this data for recognition tasks:</p>
<div class="highlight-json notranslate" id="remote-data-query"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;VoConHigh 5.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;application&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;REMOTE_TEST&quot;</span><span class="p">,</span>
    <span class="nt">&quot;input&quot;</span><span class="p">:</span>
    <span class="p">[{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;cloud&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cloud&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloud_services_name&quot;</span><span class="p">:</span> <span class="s2">&quot;csHttp&quot;</span><span class="p">,</span>
        <span class="nt">&quot;query&quot;</span> <span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;remote_test_query&quot;</span><span class="p">,</span>
          <span class="nt">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;NVC_ASR_CMD&quot;</span><span class="p">,</span>
          <span class="nt">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;uses&quot;</span><span class="p">:</span> <span class="s2">&quot;TEST_CONNINFO&quot;</span><span class="p">,</span>
          <span class="p">},</span>
          <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;REQUEST_INFO&quot;</span><span class="p">,</span>
            <span class="nt">&quot;REQUEST_INFO&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;json&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;start&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nt">&quot;end&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="nt">&quot;enable_intermediate_response&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nt">&quot;grammar_list&quot;</span><span class="p">:</span> <span class="p">[{</span>
                    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;REMOTE_CONTACTS_TEST&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;checksum&quot;</span><span class="p">:</span> <span class="s2">&quot;184323782&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structured_content&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;structured_content_category&quot;</span><span class="p">:</span> <span class="s2">&quot;contacts&quot;</span>
                <span class="p">}]</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Compared to the original version (<a class="reference internal" href="#basic-cloud-app"><span class="std std-ref">here</span></a>), not
too much has changed: the only difference is the <code class="docutils literal notranslate"><span class="pre">grammar_list</span></code>
section that is added to the <code class="docutils literal notranslate"><span class="pre">REQUEST_INFO</span></code> dictionary.</p>
<p>The value for the <code class="docutils literal notranslate"><span class="pre">grammar_list</span></code> key is a JSON array of
specifications for uploaded grammars that the recognizer should use
for recognitions by this ASR application. In the example, there is
one: for the <code class="docutils literal notranslate"><span class="pre">REMOTE_CONTACTS_TEST</span></code> grammar we uploaded using the
DCC of the same name (remember, the DCC name is used for the generated
grammar).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">id</span></code> key specifies the grammar name. The <code class="docutils literal notranslate"><span class="pre">type</span></code> key
specifies the type of grammar, and in this case (because the type is
<code class="docutils literal notranslate"><span class="pre">structured_content</span></code>), the <code class="docutils literal notranslate"><span class="pre">structured_content_category</span></code> specifies
the type of structured content. The <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">type</span></code> keys are
mandatory, and if the type is <code class="docutils literal notranslate"><span class="pre">structured_content</span></code>, then
<code class="docutils literal notranslate"><span class="pre">structured_content_category</span></code> is mandatory as well.</p>
<p id="index-6">The <code class="docutils literal notranslate"><span class="pre">checksum</span></code> key is not mandatory. It is used to specify the
version of the grammar that the cloud recognizer is supposed to use in
the recognition. If the checksum is not given, or the checksum is
different from the server’s checksum for this grammar, the grammar is
still used for recognition. However, the JSON returned to the client
will specify <code class="docutils literal notranslate"><span class="pre">&quot;force_upload&quot;</span> <span class="pre">=</span> <span class="pre">1</span></code> in its <code class="docutils literal notranslate"><span class="pre">force_upload_flag</span></code>
section (see below). If the checksum sent by the client matches the
server’s checksum, then <code class="docutils literal notranslate"><span class="pre">force_upload</span></code> will be set to 0.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Here is an example of a JSON response for a cloud recognition command
that includes uploaded data:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;result_type&quot;</span><span class="p">:</span> <span class="s2">&quot;NVC_ASR_CMD&quot;</span><span class="p">,</span>
  <span class="nt">&quot;status_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;NMAS_PRFX_TRANSACTION_ID&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cadence_regulatable_result&quot;</span><span class="p">:</span> <span class="s2">&quot;completeRecognition&quot;</span><span class="p">,</span>
  <span class="nt">&quot;NMAS_PRFX_SESSION_ID&quot;</span><span class="p">:</span> <span class="s2">&quot;1f8976cf-e0fe-47e2-8936-4adff8a616c5&quot;</span><span class="p">,</span>
  <span class="nt">&quot;words&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[{</span>
      <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="s2">&quot;0.996&quot;</span><span class="p">,</span>
      <span class="nt">&quot;word&quot;</span><span class="p">:</span> <span class="s2">&quot;Call\\*no-space-before&quot;</span>
    <span class="p">},{</span>
      <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="s2">&quot;0.995&quot;</span><span class="p">,</span>
      <span class="nt">&quot;word&quot;</span><span class="p">:</span> <span class="s2">&quot;Donald&quot;</span>
    <span class="p">},{</span>
      <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="s2">&quot;0.997&quot;</span><span class="p">,</span>
      <span class="nt">&quot;word&quot;</span><span class="p">:</span> <span class="s2">&quot;Knuth&quot;</span>
    <span class="p">}]</span>
  <span class="p">],</span>
  <span class="nt">&quot;transcriptions&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;Call Donald Knuth&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;result_format&quot;</span><span class="p">:</span> <span class="s2">&quot;rec_text_results&quot;</span><span class="p">,</span>
  <span class="nt">&quot;audio_transfer_info&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;nss_server&quot;</span><span class="p">:</span> <span class="s2">&quot;nss-server:1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;start_time&quot;</span><span class="p">:</span> <span class="s2">&quot;20191125123159425&quot;</span><span class="p">,</span>
    <span class="nt">&quot;end_time&quot;</span><span class="p">:</span> <span class="s2">&quot;20191125123159608&quot;</span><span class="p">,</span>
    <span class="nt">&quot;packages&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;bytes&quot;</span><span class="p">:</span> <span class="mi">640</span><span class="p">,</span>
      <span class="nt">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;20191125123159577&quot;</span>
    <span class="p">},{</span>
      <span class="nt">&quot;bytes&quot;</span><span class="p">:</span> <span class="mi">640</span><span class="p">,</span>
      <span class="nt">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;20191125123159630&quot;</span>
    <span class="p">}],</span>
    <span class="nt">&quot;audio_id&quot;</span><span class="p">:</span> <span class="mi">1073913</span>
  <span class="p">},</span>
  <span class="nt">&quot;confidences&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">985</span>
  <span class="p">],</span>
  <span class="nt">&quot;force_upload_flags&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;force_upload&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;checksum&quot;</span><span class="p">:</span> <span class="s2">&quot;184323782&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;REMOTE_CONTACTS_TEST&quot;</span><span class="p">,</span>
    <span class="nt">&quot;final_count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structured_content&quot;</span><span class="p">,</span>
    <span class="nt">&quot;structured_content_category&quot;</span><span class="p">:</span> <span class="s2">&quot;contacts&quot;</span>
  <span class="p">}],</span>
  <span class="nt">&quot;final_response&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;prompt&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The most important difference with the result previously shown
(<a class="reference internal" href="#cloud-basic-result"><span class="std std-ref">here</span></a>) is the <code class="docutils literal notranslate"><span class="pre">force_upload_flags</span></code>
block. This block shows the statistics for all the uploaded grammars
that the command specified in the original ASR query.</p>
<p>In this case, there was one grammar specified:
<code class="docutils literal notranslate"><span class="pre">REMOTE_CONTACTS_TEST</span></code>. Its block shows the current state of this
grammar: the number of entries, the type (and category, in this case),
and the current server-side checksum.</p>
<p>If the current server-side checksum matches the checksum specified in
the <a class="reference internal" href="#remote-data-query"><span class="std std-ref">query</span></a> (line ), then the
<code class="docutils literal notranslate"><span class="pre">force_upload</span></code> flag will have value 0. If the checksum does not
match, then <code class="docutils literal notranslate"><span class="pre">force_upload</span></code> is 1, to signal that the client should
update the server-side grammar so future requests will match.</p>
<p>Note that, because the checksum is dynamic, you would typically not
put a literal checksum number in query specification. Instead, you
would use a <code class="docutils literal notranslate"><span class="pre">vh_callback</span></code> specification (see
<a class="reference internal" href="non_functional_aspects.html#dynamic-configuration"><span class="std std-ref">Dynamic configuration at runtime</span></a>), so the checksum number is retrieved at
runtime, just before the query commnand is sent to the server:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;grammar_list&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;REMOTE_CONTACTS_TEST&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;structured_content&quot;</span><span class="p">,</span>
    <span class="nt">&quot;structured_content_category&quot;</span><span class="p">:</span> <span class="s2">&quot;contacts&quot;</span><span class="p">,</span>
    <span class="nt">&quot;checksum&quot;</span><span class="p">:</span>  <span class="p">{</span>
      <span class="nt">&quot;vh_callback&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;checksum&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="nt">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;184323782&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../SDK_Asr5_UserGuide.html">
    <img class="logo" src="../../_static/Cerence_Logo_H_black.jpg" alt="Logo"/>
    
  </a>
</p>









  <h3><a href="../../SDK_Asr5_UserGuide.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Remote applications</a><ul>
<li><a class="reference internal" href="#basic-cloud-application">Basic cloud application</a></li>
<li><a class="reference internal" href="#cloud-responses">Cloud responses</a></li>
<li><a class="reference internal" href="#connection-info">Connection info</a></li>
<li><a class="reference internal" href="#cloud-services">Cloud services</a></li>
<li><a class="reference internal" href="#data-upload">Data upload</a><ul>
<li><a class="reference internal" href="#id4">Checksum</a></li>
</ul>
</li>
<li><a class="reference internal" href="#queries-with-remote-data">Queries with remote data</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div id="index-of-terms-link" role="search">
  <br>
  <h3>Index of Terms</h3>
  <ul>
    <li>

      <ul><li><a href="../../genindex.html">Index of terms</a></li></ul>
    <li>
  </ul>
</div>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../SDK_Asr5_UserGuide.html">Documentation overview</a><ul>
  <li><a href="../chapters/using_the_csdk_ddfw.html">Using Cerence ASR</a><ul>
      <li>Previous: <a href="nlu_applications.html" title="previous chapter">NLU applications</a></li>
      <li>Next: <a href="non_functional_aspects.html" title="next chapter">Non-functional aspects to consider when using Cerence ASR</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Cerence, Inc.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>