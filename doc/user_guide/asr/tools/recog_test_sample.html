
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>recog_test</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="recog-test">
<span id="recog-test-sample"></span><span id="index-0"></span><h1>recog_test</h1>
<p>The <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> tool is a tool that is used to test recognition with a
given ASR configuration. The input configuration consists of a set of
JSON configuration files, one or more acmod files, context files,
etc. This part of the input is identical to what you would use in a
real system.</p>
<p>In addition to that, <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> also uses a separate JSON input
file that describes how to handle the input configuration: which
recognizer to activate, which applications to activate when
recognition starts, and what the end condition is. This input file
controls the behavior of <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> itself.</p>
<p>Ideally, you can test your whole ASR configuration using
<code class="docutils literal notranslate"><span class="pre">recog_test</span></code>, and transfer it to your system when you’re satisfied
with the behavior.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> example in the CSDK uses the configuration data of
the included one-shot wake-up-word C sample. In other words, the
<code class="docutils literal notranslate"><span class="pre">recog_test</span></code> sample will show the behavior that will also be shown
by the C sample, when built.</p>
<p>The directory structure in the CSDK is like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>csdk_v2
   ├──lib
   ├──tools
   │  └──recog_test
   │     ├──recog_test.exe
   │     └──recog_test_asr_sample.json
   └──sample
      └──data
         └──asr
            ├──config
            │  ├──asr_paths.json
            │  ├──audio_config.json
            │  ├──logger.json
            │  ├──asr_manager.json
            │  ├──recognizer.json
            │  ├──applications.json
            │  ├──dcc.json
            │  ├──lexicon.json
            │  ├──sem3_filters.json
            │  └──wuw_app.json
            └──data
               ├──acmod
               │  └──acmod6_6000_enu_gen_car_f16_v1_0_1.dat
               ├──asr
               │  └──vocon_asr2.dat
               ├──ctx
               │  └──*.fcf
               ├──liquid
               │  └──liquid_config.json
               ├──pron
               │  └──clc
               │     └──clc_enu_mpthreevadml_v6_0_1.dat
               ├──sem3
               │  └──music_simple_v5.s3c
               └──sound
                  └──enu_f16
                     └──*.wav
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">lib</span></code> contains the Cerence ASR libraries.</li>
<li><code class="docutils literal notranslate"><span class="pre">tools</span></code> contains the <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> binary and DLLs, and the
<code class="docutils literal notranslate"><span class="pre">recog_test</span></code>-specific configuration</li>
<li><code class="docutils literal notranslate"><span class="pre">sample/data/asr</span></code> contains the Cerence ASR configuration:<ul>
<li><code class="docutils literal notranslate"><span class="pre">config</span></code> contains the JSON files</li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code> contains the data files.</li>
</ul>
</li>
</ul>
<p>The sections below will explain the <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> configuration in
more detail. For more detail on the Cerence ASR configuration (i.e., the
JSON files and data files under <code class="docutils literal notranslate"><span class="pre">sample/data/asr</span></code>), see the section
on <a class="reference internal" href="../user_guide/sections/non_functional_aspects.html#json-typical-configuration"><span class="std std-ref">JSON configuration</span></a>.</p>
<div class="section" id="recog-test-configuration-file">
<span id="recog-test-config-file"></span><span id="index-1"></span><h2><code class="docutils literal notranslate"><span class="pre">recog_test</span></code> configuration file</h2>
<p>A <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> configuration file looks like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;configDir&quot;</span><span class="p">:</span> <span class="s2">&quot;../../sample/data/asr/config&quot;</span><span class="p">,</span>
  <span class="nt">&quot;recognizer&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;rec&quot;</span><span class="p">],</span>
  <span class="nt">&quot;audioScenario&quot;</span><span class="p">:</span> <span class="s2">&quot;mic_with_pal&quot;</span><span class="p">,</span>
  <span class="nt">&quot;data_preparation&quot;</span><span class="p">:[{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;DCC_LOCAL_TITLE&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dcc&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dcc&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cop_file&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;songs.cop&quot;</span><span class="p">],</span>
      <span class="nt">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">}</span>
  <span class="p">}],</span>
  <span class="nt">&quot;recognition&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;WUW&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span>
      <span class="nt">&quot;application&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
        <span class="nt">&quot;recognizer&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;rec&quot;</span><span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;MUSIC_SIMPLE&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span>
      <span class="nt">&quot;application&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
        <span class="nt">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;start_rule&quot;</span><span class="p">:</span> <span class="s2">&quot;wuw_anyspeech#_main_&quot;</span><span class="p">,</span>
          <span class="nt">&quot;confidence_threshold&quot;</span><span class="p">:</span> <span class="mi">5000</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These are the top-level keys:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">configDir</span></code></p>
<p>This is the location of Cerence ASR root configuration folder. In
the example, this is a relative directory, and it points to the C
sample configuration directory.</p>
<p>Any refererences that are made in the <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> configuration
file to recognizer and audio components, applications, DCCs,
etc. must exist in the configuration directory.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">data_preparation</span></code></p>
<p>This key lists the DCCs in the configuration for which the data
preparation phase needs to be run. The <code class="docutils literal notranslate"><span class="pre">action</span></code> “add” indicates
that new items should be added to the DCC, and the <code class="docutils literal notranslate"><span class="pre">cop_file</span></code> list
defines which data will be added. COP files are searched relative to
the configuration directory. In the example, with no path prepended
to the COP file name, it is expected to exist within the
configuration directory. (See <a class="reference internal" href="../user_guide/chapters/references.html#cop-file"><span class="std std-ref">COP files</span></a> for information on COP
files.)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">recognizer</span></code></p>
<p>This lists the recognizers that will be used for recognition. The
example uses only one (<code class="docutils literal notranslate"><span class="pre">rec</span></code>), which is defined in the file <code class="docutils literal notranslate"><span class="pre">recognizer.json</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">audioScenario</span></code></p>
<p>This is the audio scenarios that you want to use. Again, a scenario
by the given name must exist in the JSON configuration. In this
case, it will be defined in <code class="docutils literal notranslate"><span class="pre">audioconfig.json</span></code>.</p>
<p id="index-2">The <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> program has a built-in microphone input adapter
called <code class="docutils literal notranslate"><span class="pre">PAL_AUDIO</span></code>, which can be configured in the system’s audio
configuration. In order to use it, two parts are needed: an audio
scenario invoking the PAL audio adapter, and a specification of the
corresponding audio module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;audio_scenario&quot;</span><span class="p">:</span> <span class="p">[{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span>       <span class="s2">&quot;mic_with_pal&quot;</span><span class="p">,</span>
  <span class="s2">&quot;audiopaths&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span> <span class="s2">&quot;mic_input_pal&quot;</span><span class="p">,</span> <span class="s2">&quot;rec&quot;</span> <span class="p">]</span> <span class="p">]</span>
<span class="p">}]</span>

<span class="s2">&quot;module_config&quot;</span> <span class="p">:</span> <span class="p">[{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span>                <span class="s2">&quot;AudioInput&quot;</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span>                <span class="s2">&quot;mic_input_pal&quot;</span><span class="p">,</span>
  <span class="s2">&quot;adapter_type&quot;</span><span class="p">:</span>        <span class="s2">&quot;PAL_AUDIO&quot;</span><span class="p">,</span>
  <span class="s2">&quot;audio_format&quot;</span><span class="p">:</span>      <span class="p">{</span> <span class="s2">&quot;uses&quot;</span><span class="p">:</span> <span class="s2">&quot;16khz_1ch&quot;</span> <span class="p">}</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>If you want to use file input with <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> (e.g. for
repeatability), you should use module definitions like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;audio_scenario&quot;</span><span class="p">:</span> <span class="p">[{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span>       <span class="s2">&quot;file_input&quot;</span><span class="p">,</span>
  <span class="s2">&quot;audiopaths&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span> <span class="s2">&quot;test_file&quot;</span><span class="p">,</span> <span class="s2">&quot;rec&quot;</span> <span class="p">]</span> <span class="p">]</span>
<span class="p">}]</span>

<span class="s2">&quot;module_config&quot;</span> <span class="p">:</span> <span class="p">[{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span>                <span class="s2">&quot;AudioFromFile&quot;</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span>                <span class="s2">&quot;test_file&quot;</span><span class="p">,</span>
  <span class="s2">&quot;audio_files&quot;</span><span class="p">:</span>         <span class="s2">&quot;../../sound/enu_f16/hello_dragon.pcm&quot;</span><span class="p">,</span>
  <span class="s2">&quot;audio_format&quot;</span><span class="p">:</span>      <span class="p">{</span> <span class="s2">&quot;uses&quot;</span><span class="p">:</span> <span class="s2">&quot;16khz_1ch&quot;</span> <span class="p">}</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>These scenarios and module definitions can exist alongside
definitions for use in your system.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">language</span></code></p>
<p>This is the current language for ASR. This key is optional.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">result_format</span></code></p>
<p>This is the format in which the results will be displayed result
format. There are three options:</p>
<blockquote>
<div><ul class="simple">
<li>“none”, default value, directly display the original result.</li>
<li>“json”, display result as JSON format.</li>
<li><dl class="first docutils">
<dt>“simplify”, display some important information, like confidence, orthography, etc.</dt>
<dd>and for semantic result, it will list the representations’ probability and corresponding slots</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">recognition</span></code></p>
<p>This key lists a sequence of applications to be added to the recognition.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">exit</span></code></p>
<p>This key defines the condition for stopping <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> when a
recognition is started. Here you can define which type of result
will trigger a stop, and which conditions have to be satisfied. For
example, the minimum required confidence threshold for stopping.</p>
</li>
</ul>
</div>
<div class="section" id="recognition-session">
<h2>Recognition session</h2>
<p>The main configuration item controlling the recognition session in
<code class="docutils literal notranslate"><span class="pre">recog_test</span></code> is the <code class="docutils literal notranslate"><span class="pre">recognition</span></code> key. The value for this key is
an array of JSON dictionaries, where each dictionary describes an ASR
application to use, and the conditions for activation of that
application.</p>
<p>The CSDK sample contains two such “activatable” ASR applications:
<code class="docutils literal notranslate"><span class="pre">WUW</span></code> and <code class="docutils literal notranslate"><span class="pre">MUSIC_SIMPLE</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;WUW&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span>
  <span class="nt">&quot;application&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
    <span class="nt">&quot;recognizer&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;rec&quot;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is a simple declaration, which states that application <code class="docutils literal notranslate"><span class="pre">WUW</span></code>
(defined in <code class="docutils literal notranslate"><span class="pre">wuw_app.json</span></code>) should be added to recognizer <code class="docutils literal notranslate"><span class="pre">rec</span></code>
(defined in <code class="docutils literal notranslate"><span class="pre">recognizer.json</span></code>). Note that the recognizer key here is
optional; if it is not present, the application will be added to all
recognizers that were activated at the top-level of the JSON
configuration file. If the key is present, the application will only
be added to the recognizers listed in the array.  (Adding an
application to a recognizer is done in a call to
<code class="docutils literal notranslate"><span class="pre">&lt;AsrManager&gt;.setApplications()</span></code>.)</p>
<p>There is no <code class="docutils literal notranslate"><span class="pre">condition</span></code> key in the <code class="docutils literal notranslate"><span class="pre">application</span></code> section, which
means that the <code class="docutils literal notranslate"><span class="pre">WUW</span></code> application is activated at the start of the
recognition session.</p>
<p>Paraphrasing, this block can be understood as “At the beginning of the
recognition session, add the WUW (wake-up word) application”.</p>
<p>The second application description is more complex:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;MUSIC_SIMPLE&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;application&quot;</span><span class="p">,</span>
  <span class="nt">&quot;application&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
    <span class="nt">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;start_rule&quot;</span><span class="p">:</span> <span class="s2">&quot;wuw_anyspeech#_main_&quot;</span><span class="p">,</span>
      <span class="nt">&quot;confidence_threshold&quot;</span><span class="p">:</span> <span class="mi">5000</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p id="result-conditions"><span id="index-3"></span>The action for this application is also to add it to the recognizer,
but only when the condition described in the <code class="docutils literal notranslate"><span class="pre">condition</span></code> section
holds:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;start_rule&quot;</span><span class="p">:</span> <span class="s2">&quot;wuw_anyspeech#_main_&quot;</span><span class="p">,</span>
  <span class="s2">&quot;confidence_threshold&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The condition is applied to any result that is produced during the
recognition session. So, initially the recognizer starts listening for
a wake-up word (the <code class="docutils literal notranslate"><span class="pre">WUW</span></code> app). When a wake-up word is detected,
this will cause a result to be produced.</p>
<p>The result will be compared to the sub-conditions listed in the
<code class="docutils literal notranslate"><span class="pre">condition</span></code> sections of all apps. All sub-conditions are optional;
if more than one is present, their results must all be true to make
the condition true (the results are combined using the AND
predicate). In this case, there are two sub-conditions:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">start_rule</span></code> - it is possible in the condition to check the start
rule of the result. In the example, this sub-condition is only true
if the start rule of the result is <code class="docutils literal notranslate"><span class="pre">wuw_anyspeech#_main_</span></code>. That
is, the result must originate from the <code class="docutils literal notranslate"><span class="pre">WUW</span></code> app.</li>
<li><code class="docutils literal notranslate"><span class="pre">confidence_threshold</span></code> - the <code class="docutils literal notranslate"><span class="pre">MUSIC_SIMPLE</span></code> app will only be
actived if, in addition to the result being a WuW, the confidence
for the result is over 5000.</li>
</ul>
</div>
<div class="section" id="data-preparation">
<span id="index-4"></span><h2>Data preparation</h2>
<p>The <code class="docutils literal notranslate"><span class="pre">data_preparation</span></code> section of the <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> configuration
file instructs <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> to run the data preparation phase for
the referenced dynamic content consumers, or schedule it for later
execution. A basic example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;data_preparation&quot;</span><span class="p">:</span> <span class="p">[{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;DCC_LOCAL_TITLE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dcc&quot;</span><span class="p">,</span>
  <span class="s2">&quot;dcc&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cop_file&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;songs.cop&quot;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>The DCC with name <code class="docutils literal notranslate"><span class="pre">DCC_LOCAL_TITLE</span></code> (defined in <code class="docutils literal notranslate"><span class="pre">dcc.json</span></code>) will
be prepared with data loaded from the COP file <code class="docutils literal notranslate"><span class="pre">songs.cop</span></code>. (See:
<a class="reference internal" href="../user_guide/chapters/references.html#cop-file"><span class="std std-ref">COP files</span></a>.) This file is expected to be located in the directory
where the JSON configuration is located.</p>
<p>The way to delay data preparation is by adding a <code class="docutils literal notranslate"><span class="pre">condition</span></code> block
in theb <code class="docutils literal notranslate"><span class="pre">dcc</span></code> section. Conditions follow the same structure as
described above in the <a class="reference internal" href="#result-conditions"><span class="std std-ref">paragraph on application activation</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;data_preparation&quot;</span><span class="p">:</span> <span class="p">[{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;DCC_LOCAL_TITLE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dcc&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SOURCE_0&quot;</span><span class="p">,</span> <span class="s2">&quot;SOURCE_1&quot;</span><span class="p">,</span> <span class="s2">&quot;SOURCE_2&quot;</span><span class="p">],</span>
  <span class="s2">&quot;dcc&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;start&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cop_file&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;songs_0.cop&quot;</span><span class="p">,</span> <span class="s2">&quot;songs_1.cop&quot;</span><span class="p">,</span> <span class="s2">&quot;songs_2.cop&quot;</span><span class="p">],</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;start_rule&quot;</span><span class="p">:</span> <span class="s2">&quot;wuw_anyspeech#_main_&quot;</span><span class="p">,</span>
      <span class="s2">&quot;confidence_threshold&quot;</span><span class="p">:</span> <span class="mi">5000</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>Note that this example also includes a <code class="docutils literal notranslate"><span class="pre">source</span></code> key. This key is
optional, and configures the DCC to load data from multiple sources.</p>
</div>
<div class="section" id="exit-strategy">
<span id="index-5"></span><h2>Exit strategy</h2>
<p>The <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> exit strategy defines under which conditions a
recognition session should be terminated. There are two possible ways
to end a recognition session: by exceeding a timeout, and by getting a
result with specific properties.</p>
<p>The timeout condition can be set as follows, for example a timeout of
10 seconds:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;exit&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">10000</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Result-based exit conditions are similar to result conditions for
application activation, as described above in the <a class="reference internal" href="#result-conditions"><span class="std std-ref">paragraph on
application activation</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;exit&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;asr_result&quot;</span><span class="p">,</span>
  <span class="s2">&quot;asr_result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;start_rule&quot;</span><span class="p">:</span> <span class="s2">&quot;wuw_anyspeech#_main_&quot;</span><span class="p">,</span>
      <span class="s2">&quot;confidence_threshold&quot;</span><span class="p">:</span> <span class="mi">5000</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For NLU-based results, the exit strategy structure is the same, but
the sub-condition names are different: <code class="docutils literal notranslate"><span class="pre">appName</span></code> refers to the SEM3
application name, and <code class="docutils literal notranslate"><span class="pre">probability</span></code> is the SEM3 result’s probability
(similar to confidence for ASR results):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;exit&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sem3_result&quot;</span><span class="p">,</span>
  <span class="s2">&quot;sem3_result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;final&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sem3_condition&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;appName&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;probability&quot;</span><span class="p">:</span> <span class="mi">9000</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Similar for cloud results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;exit&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;cloud_result&quot;</span><span class="p">,</span>
  <span class="s2">&quot;cloud_result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;cloud_condition&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;transcriptions&quot;</span><span class="p">:</span> <span class="s2">&quot;input text&quot;</span><span class="p">,</span>
      <span class="s2">&quot;cloud_confidence_threshold&quot;</span><span class="p">:</span> <span class="mi">998</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And again similar for post-processor results. For the VDE result
post-processor, the result can use the ASR result JSON format or the
SEM3 result JSON format, depending on whether SEM3 post-processing is
done before the VDE post-processor runs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;exit&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pp_result&quot;</span><span class="p">,</span>
  <span class="s2">&quot;pp_result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;sem3_condition&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;appName&quot;</span><span class="p">:</span> <span class="s2">&quot;UDEPS&quot;</span><span class="p">,</span>
      <span class="s2">&quot;probability&quot;</span><span class="p">:</span> <span class="mi">2000</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>It is possible combine these exit conditions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;exit&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sem3_result&quot;</span><span class="p">,</span>
  <span class="s2">&quot;sem3_result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;final&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sem3_condition&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;appName&quot;</span><span class="p">:</span> <span class="s2">&quot;_MusicSimple&quot;</span><span class="p">,</span>
      <span class="s2">&quot;probability&quot;</span><span class="p">:</span> <span class="mi">9000</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">100000</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;cloud_result&quot;</span><span class="p">,</span>
  <span class="s2">&quot;cloud_result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;cloud_condition&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;transcriptions&quot;</span><span class="p">:</span> <span class="s2">&quot;input text&quot;</span><span class="p">,</span>
      <span class="s2">&quot;cloud_confidence_threshold&quot;</span><span class="p">:</span> <span class="mi">998</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> will stop if:</p>
<ul class="simple">
<li>the 10 second timeout is reached, OR</li>
<li>a SEM3 result with the given properties is returned from an
application, OR</li>
<li>a cloud result with the given properties is returned from an
application</li>
</ul>
</div>
<div class="section" id="running-recog-test">
<span id="index-6"></span><h2>Running <code class="docutils literal notranslate"><span class="pre">recog_test</span></code></h2>
<div class="section" id="path">
<h3>Path</h3>
<p><code class="docutils literal notranslate"><span class="pre">recog_test</span></code> is run on the command line. It has DLL dependencies in
its own directory (<code class="docutils literal notranslate"><span class="pre">pal_audio.dll</span></code>), and also the full set of
Cerence ASR libraries.</p>
<p>Windows will automatically resolve the dependencies that are located
in the same directory as the executable, but it does need to be made
aware of the location of the Cerence ASR libraries. If you installed the
CSDK in the default location, the command for extending the path looks
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">PATH</span><span class="o">=%</span><span class="n">PATH</span><span class="o">%</span><span class="p">;</span><span class="n">c</span><span class="p">:</span>\<span class="n">ProgramData</span>\<span class="n">cerence</span>\<span class="n">csdk</span>\<span class="n">csdk_v2</span>\<span class="n">lib</span>
</pre></div>
</div>
<p>You can of course add the Cerence ASR library path to the path via the
Windows control panel. That way, you don’t have to set the path again
in every console window where you want to run <code class="docutils literal notranslate"><span class="pre">recog_test</span></code>.</p>
</div>
<div class="section" id="options">
<h3>Options</h3>
<p>The <code class="docutils literal notranslate"><span class="pre">recog_test</span></code> program really has only one command-line argument:
the name (and path) of its <a class="reference internal" href="#recog-test-config-file"><span class="std std-ref">configuration file</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recog_test</span><span class="o">.</span><span class="n">exe</span> <span class="o">--</span><span class="n">configFile</span><span class="o">=</span><span class="n">recog_test</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>After starting <code class="docutils literal notranslate"><span class="pre">recog_test</span></code>, you should see logging as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Running</span> <span class="k">with</span> <span class="n">parameters</span><span class="p">:</span>
<span class="n">configDir</span><span class="p">:</span> <span class="o">.</span>\<span class="n">json</span>
<span class="n">audioConfigDir</span><span class="p">:</span> <span class="o">.</span>\<span class="n">json</span>
<span class="n">audioScenario</span><span class="p">:</span> <span class="n">mic</span>
<span class="n">recognition</span> <span class="n">objects</span><span class="p">:</span> <span class="n">APP_WUW_GED</span><span class="p">,;</span>
<span class="n">Selecting</span> <span class="n">audio</span> <span class="n">configuration</span> <span class="n">mic</span>
<span class="n">configureApplication</span> <span class="k">for</span> <span class="n">APP_WUW_GED</span>
<span class="n">Added</span> <span class="n">applications</span><span class="p">:</span> <span class="n">APP_WUW_GED</span>  <span class="n">to</span> <span class="n">time</span> <span class="mi">0</span>

<span class="n">EVENT</span> <span class="p">:</span><span class="n">RECOGNIZER_SILENCE_DETECTED</span> <span class="n">Event</span> <span class="n">message</span><span class="p">:</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="displaying-non-ascii-character-in-the-windows-console">
<h3>Displaying non-ASCII character in the Windows Console</h3>
<p>Depending on the target language (for example, Asian languages),
<code class="docutils literal notranslate"><span class="pre">recog_test</span></code> may display non-ASCII characters in the Windows
console. If they don’t display correctly on your machine, you may need
to set the console’s code page to UTF-8. You do this as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chcp</span>  <span class="mi">65001</span>
</pre></div>
</div>
<p>You will probably also need to change the console’s font to one that
supports the desired characters. (For example, “KaiTi” for Chinese.)</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../SDK_Asr5_UserGuide.html">
    <img class="logo" src="../_static/Cerence_Logo_H_black.jpg" alt="Logo"/>
    
  </a>
</p>









  <h3><a href="../SDK_Asr5_UserGuide.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">recog_test</a><ul>
<li><a class="reference internal" href="#recog-test-configuration-file"><code class="docutils literal notranslate"><span class="pre">recog_test</span></code> configuration file</a></li>
<li><a class="reference internal" href="#recognition-session">Recognition session</a></li>
<li><a class="reference internal" href="#data-preparation">Data preparation</a></li>
<li><a class="reference internal" href="#exit-strategy">Exit strategy</a></li>
<li><a class="reference internal" href="#running-recog-test">Running <code class="docutils literal notranslate"><span class="pre">recog_test</span></code></a><ul>
<li><a class="reference internal" href="#path">Path</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#displaying-non-ascii-character-in-the-windows-console">Displaying non-ASCII character in the Windows Console</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div id="index-of-terms-link" role="search">
  <br>
  <h3>Index of Terms</h3>
  <ul>
    <li>

      <ul><li><a href="../genindex.html">Index of terms</a></li></ul>
    <li>
  </ul>
</div>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../SDK_Asr5_UserGuide.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Cerence, Inc.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>